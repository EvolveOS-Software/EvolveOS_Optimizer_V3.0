<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style x:Key="BtnNavigation" TargetType="RadioButton">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{ThemeResource TextControlForeground}"/>
        <Setter Property="Height" Value="48"/>
        <Setter Property="Width" Value="Auto"/> 
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid x:Name="RootGrid" Canvas.ZIndex="110" Background="Transparent" Height="48" HorizontalAlignment="Left" MinWidth="50" MaxWidth="300">

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="MaxWidth" To="50" Duration="0:0:0.2"/>
                                        <DoubleAnimation Storyboard.TargetName="TextTranslate" Storyboard.TargetProperty="X" To="-50" Duration="0:0:0.2"/>
                                        <DoubleAnimation Storyboard.TargetName="NavTextBox" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.1"/>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NavTextBox" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="Collapsed"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="MaxWidth" To="300" Duration="0:0:0.2"/>
                                        <DoubleAnimation Storyboard.TargetName="TextTranslate" Storyboard.TargetProperty="X" To="0" Duration="0:0:0.3">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NavTextBox" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                                        </ObjectAnimationUsingKeyFrames>

                                        <DoubleAnimation Storyboard.TargetName="NavTextBox" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundPill" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="CheckStates">
                                <VisualState x:Name="Checked">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="SelectionIndicator" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundPill" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NavTextBox" Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource MyDynamicAccentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource MyDynamicAccentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Unchecked">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="SelectionIndicator" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundPill" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.2"/>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NavTextBox" Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForeground}"/>
                                        </ObjectAnimationUsingKeyFrames>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForeground}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Indeterminate"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="InnerGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Border x:Name="BackgroundPill" 
                                    Grid.Column="0" 
                                    Grid.ColumnSpan="2"
                                    Margin="4,2,4,2"
                                    CornerRadius="12" 
                                    Opacity="0"
                                    IsHitTestVisible="False"
                                    Background="{ThemeResource SystemListLowColor}"/>

                            <Rectangle x:Name="SelectionIndicator" 
                                       Grid.Column="0"
                                       Width="4" Height="18" 
                                       Fill="{ThemeResource SystemAccentColor}" 
                                       Opacity="0" 
                                       VerticalAlignment="Center" 
                                       HorizontalAlignment="Left" 
                                       RadiusX="2" RadiusY="2" 
                                       Margin="2,0,0,0"/>

                            <ContentPresenter x:Name="ContentPresenter" 
                                              Grid.Column="0"
                                              Content="{TemplateBinding Content}"
                                              Foreground="{ThemeResource TextControlForeground}"
                                              HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>

                            <TextBlock x:Name="NavTextBox" 
                                       Grid.Column="1" 
                                       Text="{TemplateBinding Tag}" 
                                       Opacity="0"
                                       Visibility="Collapsed"
                                       IsHitTestVisible="False" 
                                       VerticalAlignment="Center"
                                       Margin="10,0,20,0"
                                       FontSize="14" 
                                       FontWeight="SemiBold">
                                <TextBlock.RenderTransform>
                                    <TranslateTransform x:Name="TextTranslate" X="-50"/>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>